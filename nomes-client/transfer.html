<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="./web3.min.js"></script>
</head>
<body>

  <h1>Send ERC20 Token - FIRST TOKEN (FT)</h1>

  <h2>Notes</h2>
  <ul>
    <li>Use MetaMask</li>
  </ul>
<!----------BALANCE---------->
  <h2>Balance</h2>

  <h3>Address</h3>
  <input type="text" id="balance-address"></input>
  <p>e.g. 0x8Df70546681657D6FFE227aB51662e5b6e831B7A</p>

  <div><button id="get-balance" onclick="getBalance()">GET BALANCE</button></div>

  <h3>Result</h3>
  <span id="balance-result"></span>
<!--------------------------->
<!-----------SEND------------>
  <h2>Send</h2>

  <h3>Destination Address</h3>
  <input type="text" id="to-address"></input>
  <p>e.g. 0x8Df70546681657D6FFE227aB51662e5b6e831B7A</p>

  <!-- <h2>Decimals</h2>
  <input type="number" id="decimals" size="40" readonly></input> -->

  <h3>Amount</h3>
  <input type="number" id="amount"></input>

  <div><button id="send" onclick="send()">Send ERC20 Token</button></div>

  <h3>Result</h3>
  <span id="send-result"></span>
<!--------------------------->

<script>
    const SMART_CONTRACT_ADDRESS = "0xCB33Bb71F137A9e19A85Be7E9978Ed1Dff7080b6";
    const FT_ABI = [
    {
      "constant":true, // ?? Perque nomÃ©s funciona amb constant=TRUE, si remix ens ho dona sense.
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "balanceOf",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant":true, // ?? IDEM
      "inputs": [
        {
          "internalType": "address",
          "name": "_to",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_value",
          "type": "uint256"
        }
      ],
      "name": "transfer",
      "outputs": [
        {
          "internalType": "bool",
          "name": "success",
          "type": "bool"
        }
      ],
      "stateMutability": "payable",
      "type": "function"
    }];

    function getBalance() {
      const balanceWallet = document.getElementById('balance-address').value;
      contract.balanceOf(balanceWallet, (error, balance) => {
        document.getElementById('balance-result').innerText = balance.toString();
      });
    }

    function send() {
      console.log("send");
    }

    window.onload = function() {
      if (typeof web3 !== 'undefined') {
        web3 = new Web3(web3.currentProvider);
      } else {
        web3 = new Web3(new Web3.providers.HttpProvider("https://mainnet.infura.io"));
      }
      contract = web3.eth.contract(FT_ABI).at(SMART_CONTRACT_ADDRESS);
      console.log(web3.version.api);
    }

  </script>

</body>
</html>